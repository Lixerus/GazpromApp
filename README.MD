# Device Monitoring API

REST API –¥–ª—è —Å–±–æ—Ä–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º FastAPI –∏ Celery.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:
- –ó–∞–ø–∏—Å—å –ø–æ–∫–∞–∑–∞–Ω–∏–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (`x`, `y`, `z` –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã)
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–∞—Å—á–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (min/max/median/sum/count)
- –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Python 3.12
- FastAPI
- Celery + Redis
- PostgreSQL
- SQLAlchemy 2.0
- Locust (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

## üöÄ –ó–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone https://github.com/Lixerus/GazpromApp.git
cd GazpromApp
docker-compose up --build
```

 –î–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –≤—ã–ø–æ–ª–Ω–∏—Ç–µ

```bash
docker-compose down
```
–î–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö docker —Ä–µ—Å—É—Ä—Å–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ
```bash
docker-compose down --rmi all -v 
``` 

## 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è :

## üìä API Endpoints

### –ë–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å                     | –û–ø–∏—Å–∞–Ω–∏–µ                     |
|-------|--------------------------|------------------------------|
| POST  | `/devices/upload`        | –ó–∞–ø–∏—Å—å –Ω–æ–≤—ã—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π       |
| GET   | `/devices/stats/all`     | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º –¥–∞–Ω–Ω—ã–º    |
| GET   | `/devices/stats/grouped` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π    |

API: *http://localhost:8000/docs*


## üìà5 –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–ó–∞–ø—É—Å–∫ Locust –ª–æ–∫–∞–ª—å–Ω–æ –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–∏(–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∑–∞–≤–∏—Å–∏—Å–º–æ—Å—Ç–µ–π):

``` bash
locust -f locustfile.py
``` 
–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Locust: http://localhost:8089
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: –ú–∞–∫—Å–∏–º—É–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 300, –ø—Ä–∏—Ä–æ—Å—Ç : 5 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
–ú–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ö –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.